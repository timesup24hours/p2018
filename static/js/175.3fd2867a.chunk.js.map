{"version":3,"sources":["components/MouseTracking/trail.png","components/MouseTracking/index.js"],"names":["module","exports","__webpack_require__","r","__webpack_exports__","react__WEBPACK_IMPORTED_MODULE_0__","react__WEBPACK_IMPORTED_MODULE_0___default","n","pixi_js__WEBPACK_IMPORTED_MODULE_1__","_trail_png__WEBPACK_IMPORTED_MODULE_3__","_trail_png__WEBPACK_IMPORTED_MODULE_3___default","MouseTracking","mouseTrackingRef","useRef","clipInput","k","arr","length","getTangent","factor","array","cubicInterpolation","t","tangentFactor","Math","floor","m","p","t2","t3","useEffect","app","PIXI","backgroundColor","renderer","view","style","display","autoResize","current","appendChild","trailTexture","from","image","historyX","historyY","points","i","push","rope","blendmode","ADD","stage","addChild","ticker","add","delta","mouseposition","plugins","interaction","mouse","global","pop","unshift","x","y","ix","iy","a","createElement","className","ref"],"mappings":"mGAAAA,EAAAC,QAAA,+hBCAAC,EAAAC,EAAAC,GAAA,IAAAC,EAAAH,EAAA,GAAAI,EAAAJ,EAAAK,EAAAF,GAAAG,EAAAN,EAAA,KAAAO,GAAAP,EAAA,KAAAA,EAAA,MAAAQ,EAAAR,EAAAK,EAAAE,GAwGeE,UAlGO,WACpB,IAAMC,EAAmBC,iBAAO,MAgEhC,SAASC,EAAUC,EAAGC,GAGpB,OAFID,EAAI,IAAGA,EAAI,GACXA,EAAIC,EAAIC,OAAS,IAAGF,EAAIC,EAAIC,OAAS,GAClCD,EAAID,GAGb,SAASG,EAAWH,EAAGI,EAAQC,GAC7B,OAAQD,GAAUL,EAAUC,EAAI,EAAGK,GAASN,EAAUC,EAAI,EAAGK,IAAW,EAG1E,SAASC,EAAmBD,EAAOE,EAAGC,GACf,MAAjBA,IAAuBA,EAAgB,GAE3C,IAAMR,EAAIS,KAAKC,MAAMH,GACfI,EAAI,CACRR,EAAWH,EAAGQ,EAAeH,GAC7BF,EAAWH,EAAI,EAAGQ,EAAeH,IAE7BO,EAAI,CAACb,EAAUC,EAAGK,GAAQN,EAAUC,EAAI,EAAGK,IAE3CQ,GADNN,GAAKP,GACUO,EACTO,EAAKP,EAAIM,EACf,OACG,EAAIC,EAAK,EAAID,EAAK,GAAKD,EAAE,IACzBE,EAAK,EAAID,EAAKN,GAAKI,EAAE,KACpB,EAAIG,EAAK,EAAID,GAAMD,EAAE,IACtBE,EAAKD,GAAMF,EAAE,GAIlB,OA7FAI,oBAAU,WACR,IAAMC,EAAM,IAAIC,IAAiB,CAAEC,gBAAiB,UACpDF,EAAIG,SAASC,KAAKC,MAAMC,QAAU,QAClCN,EAAIG,SAASI,YAAa,EAE1B1B,EAAiB2B,QAAQC,YAAYT,EAAII,MAazC,IAVA,IAAMM,EAAeT,IAAaU,KAAKC,KACjCC,EAAW,GACXC,EAAW,GAKXC,EAAS,GAGNC,EAAI,EAAGA,EANI,GAMaA,IAC/BH,EAASI,KAAK,GACdH,EAASG,KAAK,GAGhB,IAAK,IAAID,EAAI,EAAGA,EATC,IASaA,IAC5BD,EAAOE,KAAK,IAAIhB,IAAW,EAAG,IAIhC,IAAMiB,EAAO,IAAIjB,IAAgBS,EAAcK,GAG/CG,EAAKC,UAAYlB,IAAiBmB,IAElCpB,EAAIqB,MAAMC,SAASJ,GAGnBlB,EAAIuB,OAAOC,IAAI,SAAAC,GAGb,IAAMC,EAAgB1B,EAAIG,SAASwB,QAAQC,YAAYC,MAAMC,OAG7DjB,EAASkB,MACTlB,EAASmB,QAAQN,EAAcO,GAC/BnB,EAASiB,MACTjB,EAASkB,QAAQN,EAAcQ,GAE/B,IAAK,IAAIlB,EAAI,EAAGA,EAjCD,IAiCeA,IAAK,CACjC,IAAMpB,EAAImB,EAAOC,GAGXmB,EAAK7C,EAAmBuB,EAAWG,EArC5B,IAFG,IAwCVoB,EAAK9C,EAAmBwB,EAAWE,EAtC5B,IAFG,IA0ChBpB,EAAEqC,EAAIE,EACNvC,EAAEsC,EAAIE,MAGT,IAmCI7D,EAAA8D,EAAAC,cAAA,OAAKC,UAAU,gBAAgBC,IAAK3D","file":"static/js/175.3fd2867a.chunk.js","sourcesContent":["module.exports = \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAAICAYAAAAWViG/AAABMklEQVRoge2YwUrDQBBA34DUgx6F3v3/X9KTeBE00LQ1lu56yK7dTrLZaloSdR4Mk5kpZUuZV7bivfe0+H8cbgZnOHc8hKy/277aAVWI9DWl/JTUqHlfvRKRGmM2XE19AONi3DO9hDoRfnBy0QCvSY2aA7wBOzVP8yYEqh/ZmYQOmACMObEAlgxL5K4wHyshD9S0kkH1Y92EQPXXSR3Zi0jDTDEBGEaXG4YFcVuYnyKcd7pXT0IfjsWyD5H2oZWLFs63MAEYxjRc0y+MRaZ/qlwcrSzicxSEA9DCMAEYxnnZclhA6L9CbFWts+P4CpLytdAi4sYe1gRg/DZeGP6TMD5vKC9azFXy/rmFA2hE5GPM4eeGCeDv8Uh+KXK1o7sQVVL/ND8zvFCxrkVkXfhcxgX4BOEchGizjjqIAAAAAElFTkSuQmCC\"","import React, { useRef, useEffect } from 'react';\nimport * as PIXI from 'pixi.js';\n\nimport './index.scss';\nimport image from './trail.png';\n\nconst MouseTracking = () => {\n  const mouseTrackingRef = useRef(null);\n  useEffect(() => {\n    const app = new PIXI.Application({ backgroundColor: 0x1099bb });\n    app.renderer.view.style.display = 'block';\n    app.renderer.autoResize = true;\n    // app.renderer.resize(window.innerWidth, window.innerHeight);\n    mouseTrackingRef.current.appendChild(app.view);\n\n    // Get the texture for rope.\n    const trailTexture = PIXI.Texture.from(image);\n    const historyX = [];\n    const historyY = [];\n    // historySize determines how long the trail will be.\n    const historySize = 20;\n    // ropeSize determines how smooth the trail will be.\n    const ropeSize = 100;\n    const points = [];\n\n    // Create history array.\n    for (let i = 0; i < historySize; i++) {\n      historyX.push(0);\n      historyY.push(0);\n    }\n    // Create rope points.\n    for (let i = 0; i < ropeSize; i++) {\n      points.push(new PIXI.Point(0, 0));\n    }\n\n    // Create the rope\n    const rope = new PIXI.SimpleRope(trailTexture, points);\n\n    // Set the blendmode\n    rope.blendmode = PIXI.BLEND_MODES.ADD;\n\n    app.stage.addChild(rope);\n\n    // Listen for animate update\n    app.ticker.add(delta => {\n      // Read mouse points, this could be done also in mousemove/touchmove update. For simplicity it is done here for now.\n      // When implementing this properly, make sure to implement touchmove as interaction plugins mouse might not update on certain devices.\n      const mouseposition = app.renderer.plugins.interaction.mouse.global;\n\n      // Update the mouse values to history\n      historyX.pop();\n      historyX.unshift(mouseposition.x);\n      historyY.pop();\n      historyY.unshift(mouseposition.y);\n      // Update the points to correspond with history.\n      for (let i = 0; i < ropeSize; i++) {\n        const p = points[i];\n\n        // Smooth the curve with cubic interpolation to prevent sharp edges.\n        const ix = cubicInterpolation(historyX, (i / ropeSize) * historySize);\n        const iy = cubicInterpolation(historyY, (i / ropeSize) * historySize);\n\n        p.x = ix;\n        p.y = iy;\n      }\n    });\n  }, []);\n\n  /**\n   * Cubic interpolation based on https://github.com/osuushi/Smooth.js\n   */\n  function clipInput(k, arr) {\n    if (k < 0) k = 0;\n    if (k > arr.length - 1) k = arr.length - 1;\n    return arr[k];\n  }\n\n  function getTangent(k, factor, array) {\n    return (factor * (clipInput(k + 1, array) - clipInput(k - 1, array))) / 2;\n  }\n\n  function cubicInterpolation(array, t, tangentFactor) {\n    if (tangentFactor == null) tangentFactor = 1;\n\n    const k = Math.floor(t);\n    const m = [\n      getTangent(k, tangentFactor, array),\n      getTangent(k + 1, tangentFactor, array)\n    ];\n    const p = [clipInput(k, array), clipInput(k + 1, array)];\n    t -= k;\n    const t2 = t * t;\n    const t3 = t * t2;\n    return (\n      (2 * t3 - 3 * t2 + 1) * p[0] +\n      (t3 - 2 * t2 + t) * m[0] +\n      (-2 * t3 + 3 * t2) * p[1] +\n      (t3 - t2) * m[1]\n    );\n  }\n\n  return <div className=\"MouseTracking\" ref={mouseTrackingRef}></div>;\n};\n\nexport default MouseTracking;\n"],"sourceRoot":""}